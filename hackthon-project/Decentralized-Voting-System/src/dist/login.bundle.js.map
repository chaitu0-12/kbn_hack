{"version":3,"sources":["login.js"],"names":["loginForm","document","getElementById","addEventListener","event","preventDefault","voter_id","value","password","headers","concat","fetch","then","response","ok","json","Error","data","role","console","log","localStorage","setItem","token","window","location","replace","getItem","catch","error","message"],"mappings":";AAAA,IAAMA,EAAYC,SAASC,eAAe,aAE1CF,EAAUG,iBAAiB,SAAU,SAACC,GACpCA,EAAMC,iBAEN,IAAMC,EAAWL,SAASC,eAAe,YAAYK,MAC/CC,EAAWP,SAASC,eAAe,YAAYK,MAG/CE,EAAU,CACd,OAAU,MACV,cAAeC,UAAAA,OAJHJ,IAOdK,MAAKD,wCAAAA,OAAyCJ,EAAQI,cAAAA,OAAaF,GAAY,CAAEC,QAAAA,IAChFG,KAAK,SAAAC,GACJ,GAAIA,EAASC,GACX,OAAOD,EAASE,OAEhB,MAAM,IAAIC,MAAM,kBAGnBJ,KAAK,SAAAK,GACc,UAAdA,EAAKC,MACPC,QAAQC,IAAIH,EAAKC,MACjBG,aAAaC,QAAQ,gBAAiBL,EAAKM,OAC3CC,OAAOC,SAASC,QAAOhB,yDAAAA,OAA0DW,aAAaM,QAAQ,oBAC/E,SAAdV,EAAKC,OACdG,aAAaC,QAAQ,gBAAiBL,EAAKM,OAC3CC,OAAOC,SAASC,QAAOhB,yDAAAA,OAA0DW,aAAaM,QAAQ,sBAGzGC,MAAM,SAAAC,GACLV,QAAQU,MAAM,gBAAiBA,EAAMC","file":"login.bundle.js","sourceRoot":"..\\js","sourcesContent":["const loginForm = document.getElementById('loginForm');\r\n\r\nloginForm.addEventListener('submit', (event) => {\r\n  event.preventDefault();\r\n\r\n  const voter_id = document.getElementById('voter-id').value;\r\n  const password = document.getElementById('password').value;\r\n  const token = voter_id;\r\n\r\n  const headers = {\r\n    'method': \"GET\",\r\n    'Authorization': `Bearer ${token}`,\r\n  };\r\n\r\n  fetch(`http://127.0.0.1:8000/login?voter_id=${voter_id}&password=${password}`, { headers })\r\n  .then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    } else {\r\n      throw new Error('Login failed');\r\n    }\r\n  })\r\n  .then(data => {\r\n    if (data.role === 'admin') {\r\n      console.log(data.role)\r\n      localStorage.setItem('jwtTokenAdmin', data.token);\r\n      window.location.replace(`http://127.0.0.1:8080/admin.html?Authorization=Bearer ${localStorage.getItem('jwtTokenAdmin')}`);\r\n    } else if (data.role === 'user'){\r\n      localStorage.setItem('jwtTokenVoter', data.token);\r\n      window.location.replace(`http://127.0.0.1:8080/index.html?Authorization=Bearer ${localStorage.getItem('jwtTokenVoter')}`);\r\n    }\r\n  })\r\n  .catch(error => {\r\n    console.error('Login failed:', error.message);\r\n  });\r\n});\r\n"]}